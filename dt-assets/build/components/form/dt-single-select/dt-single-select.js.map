{"version":3,"file":"dt-single-select.js","sources":["../../../src/components/form/dt-single-select/dt-single-select.js"],"sourcesContent":["import { html, css } from 'lit';\nimport DtFormBase from '../dt-form-base.js';\nimport '../../icons/dt-spinner.js';\nimport '../../icons/dt-checkmark.js';\n\nexport class DtSingleSelect extends DtFormBase {\n  static get styles() {\n    return [\n      ...super.styles,\n      css`\n        :host {\n          position: relative;\n        }\n\n        select {\n          appearance: none;\n          background-color: var(--dt-form-background-color, #fefefe);\n          background-image: linear-gradient(\n              45deg,\n              transparent 50%,\n              var(--dt-single-select-text-color) 50%\n            ),\n            linear-gradient(\n              135deg,\n              var(--dt-single-select-text-color) 50%,\n              transparent 50%\n            );\n          background-position: calc(100% - 20px) calc(1em + 2px),\n            calc(100% - 15px) calc(1em + 2px), calc(100% - 2.5em) 0.5em;\n          background-size: 5px 5px, 5px 5px, 1px 1.5em;\n          background-repeat: no-repeat;\n          border: 1px solid var(--dt-form-border-color, #cacaca);\n          border-radius: 0;\n          color: var(--dt-single-select-text-color, #0a0a0a);\n          font-family: var(--font-family, sans-serif);\n          font-size: 1rem;\n          font-weight: 300;\n          height: 2.5rem;\n          line-height: 1.5;\n          margin: 0 0 1rem;\n          padding: 0.53rem;\n          padding-inline-end: 1.6rem;\n          transition: border-color 0.25s ease-in-out;\n          transition: box-shadow 0.5s, border-color 0.25s ease-in-out;\n          box-sizing: border-box;\n          width: 100%;\n          text-transform: none;\n        }\n        [dir='rtl'] select {\n          background-position: 15px calc(1em + 2px), 20px calc(1em + 2px),\n            2.5em 0.5em;\n        }\n        select.color-select {\n          background-image: linear-gradient(\n              45deg,\n              transparent 50%,\n              currentColor 50%\n            ),\n            linear-gradient(\n              135deg,\n              currentColor 50%,\n              transparent 50%\n            );\n          background-color: var(--dt-form-border-color, #cacaca);\n          border: none;\n          border-radius: 10px;\n          color: var(--dt-single-select-text-color-inverse, #fff);\n          font-weight: 700;\n          text-shadow: rgb(0 0 0 / 45%) 0 0 6px;\n        }\n\n        .icon-overlay {\n          inset-inline-end: 2.5rem;\n        }\n      `,\n    ];\n  }\n\n  static get properties() {\n    return {\n      ...super.properties,\n      placeholder: { type: String },\n      options: { type: Array },\n      value: {\n        type: String,\n        reflect: true,\n      },\n      color: {\n        type: String,\n        state: true,\n      },\n      onchange: { type: String },\n    };\n  }\n\n  /**\n   * Find the color for the currently selected value\n   */\n  updateColor() {\n    if (this.value && this.options) {\n      const options = this.options.filter(opt => opt.id === this.value);\n      if (options && options.length) {\n        this.color = options[0].color;\n      }\n    }\n  }\n\n  isColorSelect() {\n    return (this.options || []).reduce(\n      (isColor, option) => isColor || option.color,\n      false\n    );\n  }\n\n  willUpdate(changedProperties) {\n    super.willUpdate(changedProperties);\n    if (changedProperties.has('value')) {\n      this.updateColor();\n    }\n  }\n\n  _change(e) {\n    // Create custom event with new/old values to pass to onchange function\n    const event = new CustomEvent('change', {\n      detail: {\n        field: this.name,\n        oldValue: this.value,\n        newValue: e.target.value,\n      },\n    });\n\n    // update value in this component\n    this.value = e.target.value;\n    this._setFormValue(this.value);\n\n    // dispatch event for use with addEventListener from javascript\n    this.dispatchEvent(event);\n  }\n\n  render() {\n    return html`\n      ${this.labelTemplate()}\n\n      <div class=\"container\" dir=\"${this.RTL ? 'rtl' : 'ltr'}\">\n        <select\n          name=\"${this.name}\"\n          aria-label=\"${this.name}\"\n          @change=\"${this._change}\"\n          class=\"${this.isColorSelect() ? 'color-select' : ''}\"\n          style=\"background-color: ${this.color};\"\n          ?disabled=\"${this.disabled}\"\n        >\n          <option disabled selected hidden value=\"\">${this.placeholder}</option>\n\n          ${this.options &&\n          this.options.map(\n            i => html`\n              <option value=\"${i.id}\" ?selected=\"${i.id === this.value}\">\n                ${i.label}\n              </option>\n            `\n          )}\n        </select>\n        ${this.loading\n          ? html`<dt-spinner class=\"icon-overlay\"></dt-spinner>`\n          : null}\n        ${this.saved\n          ? html`<dt-checkmark class=\"icon-overlay success\"></dt-checkmark>`\n          : null}\n      </div>\n    `;\n  }\n}\n\nwindow.customElements.define('dt-single-select', DtSingleSelect);\n"],"names":["window","customElements","define","DtFormBase","styles","super","css","properties","placeholder","type","String","options","Array","value","reflect","color","state","onchange","updateColor","this","filter","opt","id","length","isColorSelect","reduce","isColor","option","willUpdate","changedProperties","has","_change","e","event","CustomEvent","detail","field","name","oldValue","newValue","target","_setFormValue","dispatchEvent","render","html","labelTemplate","RTL","disabled","map","i","label","loading","saved"],"mappings":"sQA8KAA,OAAOC,eAAeC,OAAO,mBAzKtB,cAA6BC,EACvBC,oBACT,MAAO,IACFC,MAAMD,OACTE,CAAG,g1CAmEN,CAEUC,wBACT,MAAO,IACFF,MAAME,WACTC,YAAa,CAAEC,KAAMC,QACrBC,QAAS,CAAEF,KAAMG,OACjBC,MAAO,CACLJ,KAAMC,OACNI,SAAS,GAEXC,MAAO,CACLN,KAAMC,OACNM,OAAO,GAETC,SAAU,CAAER,KAAMC,QAErB,CAKDQ,cACE,GAAIC,KAAKN,OAASM,KAAKR,QAAS,CAC9B,MAAMA,EAAUQ,KAAKR,QAAQS,QAAOC,GAAOA,EAAIC,KAAOH,KAAKN,QACvDF,GAAWA,EAAQY,SACrBJ,KAAKJ,MAAQJ,EAAQ,GAAGI,MAE3B,CACF,CAEDS,gBACE,OAAQL,KAAKR,SAAW,IAAIc,QAC1B,CAACC,EAASC,IAAWD,GAAWC,EAAOZ,QACvC,EAEH,CAEDa,WAAWC,GACTxB,MAAMuB,WAAWC,GACbA,EAAkBC,IAAI,UACxBX,KAAKD,aAER,CAEDa,QAAQC,GAEN,MAAMC,EAAQ,IAAIC,YAAY,SAAU,CACtCC,OAAQ,CACNC,MAAOjB,KAAKkB,KACZC,SAAUnB,KAAKN,MACf0B,SAAUP,EAAEQ,OAAO3B,SAKvBM,KAAKN,MAAQmB,EAAEQ,OAAO3B,MACtBM,KAAKsB,cAActB,KAAKN,OAGxBM,KAAKuB,cAAcT,EACpB,CAEDU,SACE,OAAOC,CAAI,GACPzB,KAAK0B,8CAEuB1B,KAAK2B,IAAM,MAAQ,wBAErC3B,KAAKkB,qBACClB,KAAKkB,kBACRlB,KAAKY,mBACPZ,KAAKK,gBAAkB,eAAiB,+BACtBL,KAAKJ,qBACnBI,KAAK4B,6EAE0B5B,KAAKX,uBAE/CW,KAAKR,SACPQ,KAAKR,QAAQqC,KACXC,GAAKL,CAAI,kBACUK,EAAE3B,kBAAkB2B,EAAE3B,KAAOH,KAAKN,UAC/CoC,EAAEC,+BAKV/B,KAAKgC,QACHP,CAAI,iDACJ,QACFzB,KAAKiC,MACHR,CAAI,6DACJ,YAGT"}