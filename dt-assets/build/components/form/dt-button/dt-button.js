import{i as t,y as o}from"../../lit-element-2409d5fe.js";import{o as e}from"../../class-map-8d921948.js";import{D as n}from"../../dt-base.js";import{i as r}from"../../style-map-ac85d91b.js";import"../../directive-de55b00a.js";import"../../lit-localize-763e4978.js";window.customElements.define("dt-button",class extends n{static get styles(){return t`:host{display:inline-flex;width:fit-content;height:fit-content}.dt-button{cursor:pointer;display:flex;margin:var(--dt-button-margin,5px);padding:var(--dt-button-padding-y,10px) var(--dt-button-padding-x,10px);font-family:var(--dt-button-font-family);font-size:var(--dt-button-font-size,14px);line-height:var(--dt-button-line-height,inherit);font-weight:var(--dt-button-font-weight,700);background-color:var(--dt-button-context-background-color,var(--dt-button-background-color));border:var(--dt-button-border-width,1px) solid var(--dt-button-context-border-color,var(--dt-button-border-color));border-radius:var(--dt-button-border-radius,10px);box-shadow:var(--dt-button-box-shadow,--dt-button-context-box-shadow(0 2px 4px rgb(0 0 0 / 25%)));color:var(--dt-button-context-text-color,var(--dt-button-text-color));text-rendering:optimizeLegibility;gap:var(--dt-button-gap,10px);justify-content:var(--dt-button-justify-content,center);align-content:var(--dt-button-align-content,center);align-items:var(--dt-button-align-items,center);text-decoration:var(--dt-button-text-decoration,var(--dt-button-context-text-decoration,none));text-transform:var(--dt-button-text-transform,none);letter-spacing:var(--dt-button-letter-spacing,normal);width:var(--dt-button-width,100%);height:var(--dt-button-height,auto);aspect-ratio:var(--dt-button-aspect-ratio,auto);position:relative}.dt-button.dt-button--outline{background-color:transparent;color:var(--dt-button-context-text-color,var(--text-color-inverse))}.dt-button--primary:not(.dt-button--outline){--dt-button-context-border-color:var(--primary-color);--dt-button-context-background-color:var(--primary-color);--dt-button-context-text-color:var(--dt-button-text-color-light)}.dt-button--link:not(.dt-button--outline){--dt-button-context-text-decoration:underline;--dt-button-context-box-shadow:none;--dt-button-context-border-color:transparent;--dt-button-context-background-color:transparent;--dt-button-context-text-color:var(--dt-button-text-color-dark)}.dt-button--alert:not(.dt-button--outline){--dt-button-context-border-color:var(--alert-color);--dt-button-context-background-color:var(--alert-color);--dt-button-context-text-color:var(--dt-button-text-color-light)}.dt-button--caution:not(.dt-button--outline){--dt-button-context-border-color:var(--caution-color);--dt-button-context-background-color:var(--caution-color);--dt-button-context-text-color:var(--dt-button-text-color-dark)}.dt-button--success:not(.dt-button--outline){--dt-button-context-border-color:var(--success-color);--dt-button-context-background-color:var(--success-color);--dt-button-context-text-color:var(--dt-button-text-color-light)}.dt-button--inactive:not(.dt-button--outline){--dt-button-context-border-color:var(--inactive-color);--dt-button-context-background-color:var(--inactive-color);--dt-button-context-text-color:var(--dt-button-text-color-light)}.dt-button--disabled:not(.dt-button--outline){--dt-button-context-border-color:var(--disabled-color);--dt-button-context-background-color:var(--disabled-color);--dt-button-context-text-color:var(--dt-button-text-color-dark)}.dt-button--primary.dt-button--outline{--dt-button-context-border-color:var(--primary-color);--dt-button-context-text-color:var(--primary-color)}.dt-button--alert.dt-button--outline{--dt-button-context-border-color:var(--alert-color);--dt-button-context-text-color:var(--alert-color)}.dt-button--caution.dt-button--outline{--dt-button-context-border-color:var(--caution-color);--dt-button-context-text-color:var(--caution-color)}.dt-button--success.dt-button--outline{--dt-button-context-border-color:var(--success-color);--dt-button-context-text-color:var(--success-color)}.dt-button--inactive.dt-button--outline{--dt-button-context-border-color:var(--inactive-color)}.dt-button--disabled.dt-button--outline{--dt-button-context-border-color:var(--disabled-color)}.dt-button.dt-button--rounded{--dt-button-border-radius:50%;--dt-button-padding-x:0px;--dt-button-padding-y:0px;--dt-button-aspect-ratio:var(--dt-button-rounded-aspect-ratio, 1/1)}.dt-button--custom{padding:var(--dt-button-padding-y,7px) var(--dt-button-padding-x,10px);font-size:var(--dt-button-font-size,12px);font-weight:var(--dt-button-font-weight,300);border-radius:var(--dt-button-border-radius,5px)}.dt-button--star{--dt-button-background-color:transparent;--dt-button-border-color:transparent;padding:0}::slotted(svg){margin:1.5em;vertical-align:middle!important}button.toggle{margin-inline-end:0;margin-inline-start:auto;background:0 0;border:none;color:inherit;cursor:pointer;display:flex;align-items:center}`}static get properties(){return{label:{type:String},context:{type:String},type:{type:String},outline:{type:Boolean},href:{type:String},title:{type:String},onClick:{attribute:!1},rounded:{type:Boolean},confirm:{type:String},buttonClass:{type:String},custom:{type:Boolean},favorite:{type:Boolean,reflect:!0},favorited:{type:String},listButton:{type:Boolean},buttonStyle:{type:Object}}}get classes(){const t={"dt-button":!0,"dt-button--outline":this.outline,"dt-button--rounded":this.rounded,"dt-button--custom":this.custom};return t[`dt-button--${this.context}`]=!0,t}constructor(){super(),this.context="default",this.favorite=this.favorited||!1,this.listButton=!1}connectedCallback(){super.connectedCallback(),(this.id.startsWith("favorite")||"follow-button"===this.id||"following-button"===this.id)&&window.addEventListener("load",(async()=>{const t=await new CustomEvent("dt:get-data",{bubbles:!0,detail:{field:this.id,postType:this.postType,onSuccess:t=>{switch(Object.keys(t).find((t=>["favorite","unfollow","follow"].includes(t)))){case"favorite":{this.favorite=!!t.favorite&&t.favorite;const o=this.shadowRoot.querySelector("slot").assignedNodes({flatten:!0}).find((t=>t.nodeType===Node.ELEMENT_NODE&&t.classList.contains("icon-star")));this.favorite?o.classList.add("selected"):o.classList.remove("selected"),this.requestUpdate()}break;case"follow":this.following=!0,this.requestUpdate();break;case"unfollow":this.following=!1,this.requestUpdate();break;default:console.log("No matching Key found!")}},onError:t=>{console.warn(t)}}});this.dispatchEvent(t)}))}handleClick(t){if(t.preventDefault(),!this.confirm||confirm(this.confirm))if(this.id.startsWith("favorite")||"follow-button"===this.id||"following-button"===this.id)t.preventDefault(),this.onClick(t);else if("create-post-button"===this.id){const t=this.closest("form");t?console.log("Form found",t):console.error("Form not found!");const o=new FormData(t),e={form:{},el:{type:"access"}};o.forEach(((t,o)=>{e.form[o]=t})),Array.from(t.elements).forEach((t=>{if(t.localName.startsWith("dt-")&&t.value&&""!==String(t.value).trim())if(t.localName.startsWith("dt-comm")){const o=t.value.map((t=>({value:t.value})));e.el[t.name]=o}else if(t.localName.startsWith("dt-multi")||t.localName.startsWith("dt-tags")){const o=t.value.map((t=>({value:t})));e.el[t.name]={values:o}}else if(t.localName.startsWith("dt-connection")){const o=t.value.map((t=>({value:t.label})));e.el[t.name]={values:o}}else e.el[t.name]=t.value}));const n=new CustomEvent("send-data",{detail:{field:this.id,newValue:e}});this.dispatchEvent(n)}else{const t=this.closest("form");t&&t.submit()}else t.preventDefault()}onClick(t){if(t.preventDefault(),t.stopPropagation(),this.listButton&&(this.favorite=this.favorited),this.id.startsWith("favorite")){const t=new CustomEvent("customClick",{detail:{field:this.id,toggleState:!this.favorite},bubbles:!0,composed:!0});this.favorite=!this.favorite;const o=this.shadowRoot.querySelector("slot").assignedNodes({flatten:!0}).find((t=>t.nodeType===Node.ELEMENT_NODE&&t.classList.contains("icon-star")));o&&(o.classList.contains("selected")?o.classList.remove("selected"):o.classList.add("selected")),this.dispatchEvent(t),this.requestUpdate()}else if("follow-button"===this.id||"following-button"===this.id){const t=this.following,o=new CustomEvent("customClick",{detail:{field:this.id,toggleState:t}});this.id="follow-button"===this.id?"following-button":"follow-button",this.label="Follow"===this.label?"Following":"Follow",this.outline=!this.outline,this.following=!this.following,this.requestUpdate(),this.dispatchEvent(o)}}_getSVGIcon(){return"follow-button"===this.id||"following-button"===this.id?o`<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path fill="currentColor" d="M12 9a3 3 0 0 0-3 3a3 3 0 0 0 3 3a3 3 0 0 0 3-3a3 3 0 0 0-3-3m0 8a5 5 0 0 1-5-5a5 5 0 0 1 5-5a5 5 0 0 1 5 5a5 5 0 0 1-5 5m0-12.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5"/></svg>`:""}_dismiss(){this.hide=!0}render(){if(this.hide)return o``;const t={...this.classes},n="follow-button"!==this.id&&"following-button"!==this.id||!this.label?o`<slot></slot>`:this.label;return this.href?o`<a id="${this.name}" class="${e(t)}" href="${this.href}" title="${this.title}" type="${this.type}" @click="${this.handleClick}"><div>${n}${this._getSVGIcon()}</div></a>`:o`<button class="${e(t)}" title="${this.title}" style="${r(this.buttonStyle||{})}" type="${this.type}" .value="${this.value}" @click="${this.handleClick}"><div>${n}${this._getSVGIcon()}</div></button>`}});
//# sourceMappingURL=dt-button.js.map
