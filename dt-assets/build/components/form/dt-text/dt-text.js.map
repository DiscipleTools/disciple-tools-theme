{"version":3,"file":"dt-text.js","sources":["../../../src/components/form/dt-text/dt-text.js"],"sourcesContent":["import { html, css } from 'lit';\nimport { classMap } from 'lit/directives/class-map.js';\nimport DtFormBase from '../dt-form-base.js';\nimport '../../icons/dt-spinner.js';\nimport '../../icons/dt-checkmark.js';\nimport '../../icons/dt-exclamation-circle.js';\n\nexport class DtText extends DtFormBase {\n  static get styles() {\n    return [\n      ...super.styles,\n      css`\n        input {\n          color: var(--dt-form-text-color, #000);\n          appearance: none;\n          background-color: var(--dt-text-background-color, #fefefe);\n          border: 1px solid var(--dt-text-border-color, #fefefe);\n          border-radius: var(--dt-text-border-radius, 0);\n          box-shadow: var(\n            --dt-text-box-shadow,\n            var(\n              --dt-form-input-box-shadow,\n              inset 0 1px 2px hsl(0deg 0% 4% / 10%)\n            )\n          );\n          box-sizing: border-box;\n          display: block;\n          font-family: inherit;\n          font-size: 1rem;\n          font-weight: 300;\n          height: 2.5rem;\n          line-height: 1.5;\n          margin: 0 0 1.0666666667rem;\n          padding: var(--dt-form-padding, 0.5333333333rem);\n          transition: var(\n            --dt-form-transition,\n            box-shadow 0.5s,\n            border-color 0.25s ease-in-out\n          );\n          width: 100%;\n        }\n        input:disabled,\n        input[readonly],\n        textarea:disabled,\n        textarea[readonly] {\n          background-color: var(\n            --dt-text-disabled-background-color,\n            var(--dt-form-disabled-background-color, #e6e6e6)\n          );\n          cursor: not-allowed;\n        }\n        input:focus-within,\n        input:focus-visible {\n          outline: none;\n        }\n        input::placeholder {\n          color: var(--dt-text-placeholder-color, #999);\n          text-transform: var(--dt-text-placeholder-transform, none);\n          font-size: var(--dt-text-placeholder-font-size, 1rem);\n          font-weight: var(--dt-text-placeholder-font-weight, 400);\n          letter-spacing: var(--dt-text-placeholder-letter-spacing, normal);\n        }\n        input.invalid {\n          border-color: var(--dt-text-border-color-alert, var(--alert-color));\n        }\n      `,\n    ];\n  }\n\n  static get properties() {\n    return {\n      ...super.properties,\n      id: { type: String },\n      type: { type: String },\n      placeholder: { type: String },\n      value: {\n        type: String,\n        reflect: true,\n      },\n      onchange: { type: String },\n    };\n  }\n\n  _change(e) {\n    const event = new CustomEvent('change', {\n      detail: {\n        field: this.name,\n        oldValue: this.value,\n        newValue: e.target.value,\n      },\n    });\n\n    this.value = e.target.value;\n\n    this._setFormValue(this.value);\n\n    this.dispatchEvent(event);\n  }\n\n  implicitFormSubmit(e) {\n    const keycode = e.keyCode || e.which;\n    // If the Enter key is pressed, find the first button in the form and click it.\n    // This replicates normal browser handling of input elements when pressing Enter\n    if (keycode === 13 && this.internals.form) {\n      const button = this.internals.form.querySelector('button');\n      if (button) {\n        button.click();\n      }\n    }\n  }\n\n  _validateRequired() {\n    const { value } = this;\n    const input = this.shadowRoot.querySelector('input');\n    if (value === '' && this.required) {\n      this.invalid = true;\n      this.internals.setValidity(\n        {\n          valueMissing: true,\n        },\n        this.requiredMessage || 'This field is required',\n        input\n      );\n    } else {\n      this.invalid = false;\n      this.internals.setValidity({});\n    }\n  }\n\n  get classes() {\n    const classes = {\n      'text-input': true,\n      invalid: this.touched && this.invalid,\n    };\n    return classes;\n  }\n\n  render() {\n    return html`\n      ${this.labelTemplate()}\n\n      <div class=\"input-group\">\n        <input\n          id=\"${this.id}\"\n          name=\"${this.name}\"\n          aria-label=\"${this.label}\"\n          type=\"${this.type || 'text'}\"\n          placeholder=\"${this.placeholder}\"\n          ?disabled=${this.disabled}\n          ?required=${this.required}\n          class=\"${classMap(this.classes)}\"\n          .value=\"${this.value || ''}\"\n          @change=${this._change}\n          novalidate\n          @keyup=\"${this.implicitFormSubmit}\"\n        />\n\n        ${this.touched && this.invalid\n          ? html`<dt-exclamation-circle\n              class=\"icon-overlay alert\"\n            ></dt-exclamation-circle>`\n          : null}\n        ${this.error\n          ? html`<dt-icon\n              icon=\"mdi:alert-circle\"\n              class=\"icon-overlay alert\"\n              tooltip=\"${this.error}\"\n              size=\"2rem\"\n              ></dt-icon>`\n            : null}\n        ${this.loading\n          ? html`<dt-spinner class=\"icon-overlay\"></dt-spinner>`\n          : null}\n        ${this.saved\n          ? html`<dt-checkmark class=\"icon-overlay success\"></dt-checkmark>`\n          : null}\n      </div>\n    `;\n  }\n}\n\nwindow.customElements.define('dt-text', DtText);\n"],"names":["DtText","DtFormBase","styles","super","css","properties","id","type","String","placeholder","value","reflect","onchange","_change","e","event","CustomEvent","detail","field","this","name","oldValue","newValue","target","_setFormValue","dispatchEvent","implicitFormSubmit","keyCode","which","internals","form","button","querySelector","click","_validateRequired","input","shadowRoot","required","invalid","setValidity","valueMissing","requiredMessage","classes","touched","render","html","labelTemplate","label","disabled","classMap","error","loading","saved","window","customElements","define"],"mappings":"uYAOO,MAAMA,UAAeC,EACfC,oBACT,MAAO,IACFC,MAAMD,OACTE,CAAG,osCAwDN,CAEUC,wBACT,MAAO,IACFF,MAAME,WACTC,GAAI,CAAEC,KAAMC,QACZD,KAAM,CAAEA,KAAMC,QACdC,YAAa,CAAEF,KAAMC,QACrBE,MAAO,CACLH,KAAMC,OACNG,SAAS,GAEXC,SAAU,CAAEL,KAAMC,QAErB,CAEDK,QAAQC,GACN,MAAMC,EAAQ,IAAIC,YAAY,SAAU,CACtCC,OAAQ,CACNC,MAAOC,KAAKC,KACZC,SAAUF,KAAKT,MACfY,SAAUR,EAAES,OAAOb,SAIvBS,KAAKT,MAAQI,EAAES,OAAOb,MAEtBS,KAAKK,cAAcL,KAAKT,OAExBS,KAAKM,cAAcV,EACpB,CAEDW,mBAAmBZ,GAIjB,GAAgB,MAHAA,EAAEa,SAAWb,EAAEc,QAGTT,KAAKU,UAAUC,KAAM,CACzC,MAAMC,EAASZ,KAAKU,UAAUC,KAAKE,cAAc,UAC7CD,GACFA,EAAOE,OAEV,CACF,CAEDC,oBACE,MAAMxB,MAAEA,GAAUS,KACZgB,EAAQhB,KAAKiB,WAAWJ,cAAc,SAC9B,KAAVtB,GAAgBS,KAAKkB,UACvBlB,KAAKmB,SAAU,EACfnB,KAAKU,UAAUU,YACb,CACEC,cAAc,GAEhBrB,KAAKsB,iBAAmB,yBACxBN,KAGFhB,KAAKmB,SAAU,EACfnB,KAAKU,UAAUU,YAAY,CAAA,GAE9B,CAEGG,cAKF,MAJgB,CACd,cAAc,EACdJ,QAASnB,KAAKwB,SAAWxB,KAAKmB,QAGjC,CAEDM,SACE,OAAOC,CAAI,GACP1B,KAAK2B,sDAIG3B,KAAKb,aACHa,KAAKC,qBACCD,KAAK4B,gBACX5B,KAAKZ,MAAQ,wBACNY,KAAKV,2BACRU,KAAK6B,wBACL7B,KAAKkB,oBACRY,EAAS9B,KAAKuB,qBACbvB,KAAKT,OAAS,gBACdS,KAAKN,+BAELM,KAAKO,wBAGfP,KAAKwB,SAAWxB,KAAKmB,QACnBO,CAAI,6EAGJ,QACF1B,KAAK+B,MACHL,CAAI,wEAGS1B,KAAK+B,gCAGhB,QACJ/B,KAAKgC,QACHN,CAAI,iDACJ,QACF1B,KAAKiC,MACHP,CAAI,6DACJ,YAGT,EAGHQ,OAAOC,eAAeC,OAAO,UAAWvD"}